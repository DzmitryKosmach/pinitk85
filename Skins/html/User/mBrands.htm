<!-- Хлебные крошки -->
<nav class="text-sm text-gray-500 flex flex-wrap items-center gap-1 mb-6">
    <a href="/" class="hover:text-gray-700 hover:underline">Главная</a>
    <span class="mx-1">›</span>
    <span class="uppercase">Бренды и торговые марки</span>
</nav>

<section class="mb-16">
    <h1 class="text-[21px] md:text-4xl font-semibold mb-4 md:mb-8">
        Бренды и торговые марки
    </h1>

    <div class="relative grid grid-cols-2 sm2:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-4 lg:gap-6">
        <?php
        for ($i = 1; $i <= 93; $i++) { // Изменено на диапазон от 1 до 93
            echo '<div class="brand-card hidden transition-all duration-500 ease-in-out opacity-0">';

        // Подготовим переменную для пути к изображению
        $imagePath = "/images/brands/brand (" . $i . ").jpg";

        // Включаем шаблон карточки с передачей переменной
        include(Config::path('skins') . '/html/Components/brand_card.htm');

        echo '</div>';
    }
    ?>
    </div>

    <div class="flex justify-center mt-8">
        <button id="showMoreBtn" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300">
            Показать еще
        </button>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const brandCards = document.querySelectorAll('.brand-card');
        const showMoreBtn = document.getElementById('showMoreBtn');
        let currentIndex = 0;
        const batchSize = 16;
        const totalCards = brandCards.length;

        // Показать первые 16 карточек
        showNextBatch();

        showMoreBtn.addEventListener('click', function() {
            showNextBatch();
        });

        function showNextBatch() {
            const endIndex = Math.min(currentIndex + batchSize, totalCards);

            // Плавно показать следующую партию
            for (let i = currentIndex; i < endIndex; i++) {
                setTimeout(() => {
                    brandCards[i].classList.remove('hidden');
                    brandCards[i].classList.add('opacity-100');
                }, (i - currentIndex) * 30); // Небольшая задержка для плавности
            }

            currentIndex = endIndex;

            // Скрыть кнопку, если все карточки показаны
            if (currentIndex >= totalCards) {
                showMoreBtn.style.display = 'none';
            }
        }
    });
</script>

<style>
    .brand-card.hidden {
        opacity: 0;
        max-height: 0;
        overflow: hidden;
        transition: all 0.5s ease-in-out;
    }

    .brand-card:not(.hidden) {
        opacity: 1;
        max-height: 500px;
        overflow: visible;
    }
</style>
