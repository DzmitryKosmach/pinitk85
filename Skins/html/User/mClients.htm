<!-- Хлебные крошки -->
<nav class="text-sm text-gray-500 flex flex-wrap items-center gap-1 mb-6">
    <a href="/" class="hover:text-gray-700 hover:underline">Главная</a>
    <span class="mx-1">›</span>
    <span class="uppercase">Наши клиенты</span>
</nav>

<section class="mb-16">
    <h1 class="text-[21px] md:text-4xl font-semibold mb-4 md:mb-8">
        Наши клиенты
    </h1>

    <div class="relative grid grid-cols-2 sm2:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 md:gap-4 lg:gap-6">

        <?php
      for ($i = 1; $i <= 119; $i++) {
          $imagePath = "/images/clients/client (" . $i . ").jpg";
          echo '<div class="client-card hidden transition-all duration-500 ease-in-out opacity-0">';
        include(Config::path('skins') . '/html/Components/client_card.htm');
        echo '</div>';
    }
    ?>

    </div>

    <div class="flex justify-center mt-8">
        <button id="showMoreClientsBtn" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300">
            Показать еще
        </button>
    </div>

    <?php echo $toggle; ?>

</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const clientCards = document.querySelectorAll('.client-card');
        const showMoreClientsBtn = document.getElementById('showMoreClientsBtn');
        let currentIndex = 0;
        const batchSize = 18;
        const totalCards = clientCards.length;

        // Показать первые 18 карточек
        showNextBatch();

        showMoreClientsBtn.addEventListener('click', function() {
            showNextBatch();
        });

        function showNextBatch() {
            const endIndex = Math.min(currentIndex + batchSize, totalCards);

            // Плавно показать следующую партию
            for (let i = currentIndex; i < endIndex; i++) {
                setTimeout(() => {
                    clientCards[i].classList.remove('hidden');
                    clientCards[i].classList.add('opacity-100');
                }, (i - currentIndex) * 30); // Небольшая задержка для плавности
            }

            currentIndex = endIndex;

            // Скрыть кнопку, если все карточки показаны
            if (currentIndex >= totalCards) {
                showMoreClientsBtn.style.display = 'none';
            }
        }
    });
</script>

<style>
    .client-card.hidden {
        opacity: 0;
        max-height: 0;
        overflow: hidden;
        transition: all 0.5s ease-in-out;
    }

    .client-card:not(.hidden) {
        opacity: 1;
        max-height: 500px;
        overflow: visible;
    }
</style>
