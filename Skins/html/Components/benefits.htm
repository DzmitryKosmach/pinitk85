<?php
// Базовый URL
$baseUrl = 'http://pinitk85.beget.tech';

// Данные для карточек (можно вынести в настройки или БД)
$benefits = [
    [
        'url' => '/preimuschestva/nizkie-tseny-i-skidki/',
'icon' => '/images/product/rub.png',
'title' => 'Самые низкие цены?!',
'text' => 'Индивидуальный подход к каждому заказчику. Минимальные цены, дополнительные скидки. Удобная оплата, с НДС и без, договор.'
],
[
'url' => '/preimuschestva/garantiya-ot-proizvoditelya/',
'icon' => '/images/product/user.png',
'title' => 'Гарантия от производителя?!',
'text' => 'Мебель только лучших фабрик, поставщиков и производителей России и зарубежья.'
],
[
'url' => '/preimuschestva/nashi-sotrudniki-professionaly-svoego-dela/',
'icon' => '/images/product/rule.png',
'title' => 'Вызвать специлиста в офис или получить консультацию эксперта?!',
'text' => 'Предоставим каталог и образцы, дизайн проект и расстановку Вашей офисной мебели.'
],
[
'url' => '/preimuschestva/prostota-vybora/',
'icon' => '/images/product/busket.png',
'title' => 'Как уточнить и сделать покупку?!',
'text' => 'На нашем сайте не надо регистрироваться, чтобы отправить заказ в корзину для уточнения информации достаточно оставить имя и телефон.'
]
];
?>

<section>
  <!-- Заголовок и кнопка в одном ряду -->
  <div class="flex mt-4 flex-row flex-wrap gap-4">
    <h2 class="text-2xl font-bold mt-2 mb-0 md:mb-0">Почему стоит заказать у нас?</h2>

    <button id="toggle-benefits-btn"
            class="self-start md:self-auto px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-transform duration-200 ease-in-out hover:scale-105 active:scale-95">
      Узнать
    </button>
  </div>

  <!-- Контейнер с карточками (плавное раскрытие/скрытие) -->
  <div id="benefits-container"
       class="overflow-hidden max-h-0 transition-all duration-500 ease-in-out">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 justify-between text-sm md:text-base font-medium mt-4">
      <?php foreach ($benefits as $item): ?>
      <a href="<?php echo $baseUrl . $item['url']; ?>"
         class="flex items-start gap-2 bg-white p-3 shadow rounded no-underline text-current hover:no-underline"
         target="_blank">
        <div class="shadow-[inset_0px_0px_10px_4px_rgba(43,72,241,0.20)] p-3 rounded-md shrink-0">
          <img src="<?php echo $item['icon']; ?>"
               class="w-3 h-4 lg:w-5 lg:h-6 md:w-4 md:h-5"
               alt="<?php echo htmlspecialchars($item['title']); ?>" />
        </div>
        <p class="text-base sm:text-lg font-medium">
          <?php echo htmlspecialchars($item['title']); ?>
          <span class="block font-normal"><?php echo htmlspecialchars($item['text']); ?></span>
        </p>
      </a>
      <?php endforeach; ?>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggleBtn = document.getElementById('toggle-benefits-btn');
    const container = document.getElementById('benefits-container');
    let isExpanded = false;

    toggleBtn.addEventListener('click', () => {
      if (isExpanded) {
        // Скрываем
        container.style.maxHeight = container.scrollHeight + 'px';
        // Trigger reflow
        container.offsetHeight;
        container.style.maxHeight = '0';
        toggleBtn.textContent = 'Узнать';
      } else {
        // Показываем
        container.style.maxHeight = container.scrollHeight + 'px';
        toggleBtn.textContent = 'Скрыть';
      }

      isExpanded = !isExpanded;
    });
  });
</script>
