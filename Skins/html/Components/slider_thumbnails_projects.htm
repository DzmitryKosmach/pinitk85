<!-- Галерея миниатюр с кнопками прокрутки -->
<?php if (!empty($photos)): ?>
<div class="slider-thumbnails-container">
  <div class="relative h-full flex justify-center items-center lg:max-w-[80px] overflow-hidden">
    <div class="slider-track flex flex-row lg:flex-col gap-2
                overflow-x-auto lg:overflow-y-auto
                scroll-smooth scrollbar-none"
         style="scroll-behavior: smooth; -webkit-overflow-scrolling: touch;">
      <?php foreach($photos as $pn => $p): ?>
      <?php
          // URL большой версии (для lightbox и замены основного изображения)
          $bigUrl = Config::pathRel('images') . Clients_Projects_Pics::$imagePath . $p['id'] . '_0x0_1_wm.' . $p['_img_ext'];
          // URL миниатюры 90x90 — по аналогии с 197x153, просто другой размер
          $thumbUrl = Config::pathRel('images') . Clients_Projects_Pics::$imagePath . $p['id'] . '_90x90_0_wm.' . $p['_img_ext'];
          // Alt/title
          $alt = hsch($p['alt'] ?: $projectInf['name'] . ($pn > 0 ? ' - фото ' . ($pn + 1) : ''));
      ?>
      <img
        src="<?php echo $thumbUrl; ?>"
        data-bigimage="<?php echo $bigUrl; ?>"
        alt="<?php echo $alt; ?>"
        title="<?php echo $alt; ?>"
        class="w-20 h-20 object-cover rounded border-2 flex-shrink-0 cursor-pointer transition-transform hover:scale-105"
        onclick="changeMainImage(this)"
      />
      <?php endforeach; ?>
    </div>

    <!-- Кнопка "назад" -->
    <button type="button"
            class="slider-prev absolute z-10 flex items-center justify-center
                   w-8 h-8 rounded-full bg-white/70 backdrop-blur-sm text-gray-600 hover:text-black focus:outline-none
                   top-1/2 -translate-y-1/2 left-0 lg:top-0 lg:left-1/2 lg:-translate-x-1/2 lg:translate-y-0"
            aria-label="Предыдущее изображение">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 rotate-[-90deg] lg:rotate-0"
           fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
      </svg>
    </button>

    <!-- Кнопка "вперёд" -->
    <button type="button"
            class="slider-next absolute z-10 flex items-center justify-center
                   w-8 h-8 rounded-full bg-white/70 backdrop-blur-sm text-gray-600 hover:text-black focus:outline-none
                   -translate-y-1 right-0 lg:bottom-0 lg:left-1/2 lg:-translate-x-1/2 lg:translate-y-0"
            aria-label="Следующее изображение">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 rotate-90 lg:rotate-180"
           fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
      </svg>
    </button>
  </div>
</div>
<?php endif; ?>

<?php echo JsCopmress::load('slider-vertical'); ?>
